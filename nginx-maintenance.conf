server {
    listen 80;
    server_name rezerwacja24.pl www.rezerwacja24.pl;
    
    # Maintenance page
    root /var/www/maintenance;
    index maintenance.html;
    
    # Redirect all traffic to maintenance page
    location / {
        try_files $uri $uri/ /maintenance.html =503;
    }
    
    # Allow access to static files (if needed)
    location ~* \.(css|js|jpg|jpeg|png|gif|ico|svg|woff|woff2|ttf|eot)$ {
        root /var/www/maintenance;
        try_files $uri =404;
        access_log off;
        expires 1h;
    }
    
    # Don't log favicon.ico
    location = /favicon.ico {
        log_not_found off;
        access_log off;
    }
    
    # Don't log robots.txt
    location = /robots.txt {
        log_not_found off;
        access_log off;
    }
    
    # Hide .ht* files
    location ~ /\.ht {
        deny all;
        access_log off;
        log_not_found off;
    }
    
    # Return 503 status code for API calls
    location /api/ {
        return 503;
    }
    
    # Error pages
    error_page 503 @maintenance;
    
    location @maintenance {
        root /var/www/maintenance;
        try_files /maintenance.html =503;
        add_header Retry-After 3600;
    }
}
